(transaction
  (configure { :ivm.maintenance_level "off" :semantics_version 0})
  (epoch
    (writes
      (define
        (fragment
          :f1
          (def :edge1 ([x::STRING y::STRING] (and (= x "a") (= y "b"))))
          (def :edge2 ([x::STRING y::STRING] (and (= x "b") (= y "c"))))
          (def :edge3 ([x::STRING y::STRING] (and (= x "b") (= y "d"))))
          (def :edge4 ([x::STRING y::STRING] (and (= x "d") (= y "e"))))
          (def
            :edge
            ([x::STRING y::STRING]
             (or (atom :edge1 x y) (atom :edge2 x y) (atom :edge3 x y) (atom :edge4 x y))))
          (def :path1 ([x::STRING y::STRING] (atom :edge x y)))
          (def
            :path2
            ([x::STRING z::STRING]
             (exists [y::STRING] (and (atom :edge x y) (atom :path y z)))))
          (def :path ([x::STRING y::STRING] (or (atom :path1 x y) (atom :path2 x y))))
          (def :output ([x::STRING y::STRING] (atom :path x y))))))
    (reads (output :result :output))))
