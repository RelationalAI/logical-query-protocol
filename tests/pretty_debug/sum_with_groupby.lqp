(transaction
  (configure { :ivm.maintenance_level "off" :semantics_version 0})
  (epoch
    (writes
      (define
        (fragment
          :f1
          (def
            0x13422d706483bfa0f98a5e886266e7ae
            ([category::STRING amount::FLOAT]
             (or
               (and (= category "food") (= amount 1.23))
               (and (= category "food") (= amount 10.23))
               (and (= category "food") (= amount 13.0))
               (and (= category "drink") (= amount 6.34))
               (and (= category "drink") (= amount 2.82)))))
          (def
            0xe522b6b402d8193594fd05103064fc6a
            ([cat::STRING x::FLOAT]
             (reduce
               ([a::FLOAT b::FLOAT c::FLOAT] (+ a b c))
               ([num::FLOAT] (atom 0x13422d706483bfa0f98a5e886266e7ae cat num))
               (terms x))))
          (def
            0xbc84e5430a7dc104c700bbc0de2b59e3
            ([cat::STRING x::INT]
             (reduce
               ([a::FLOAT b::FLOAT c::FLOAT] (+ a b c))
               ([num::FLOAT one::INT]
                (and (atom 0x13422d706483bfa0f98a5e886266e7ae cat num) (= one 1)))
               (terms x)))))))
    (reads
      (output :items_sum 0xe522b6b402d8193594fd05103064fc6a)
      (output :items_count 0xbc84e5430a7dc104c700bbc0de2b59e3))))

;; Debug information
;; -----------------------
;; Original names
;; 	 ID `0xbc84e5430a7dc104c700bbc0de2b59e3` -> `count`
;; 	 ID `0x13422d706483bfa0f98a5e886266e7ae` -> `foo`
;; 	 ID `0xe522b6b402d8193594fd05103064fc6a` -> `sum`
