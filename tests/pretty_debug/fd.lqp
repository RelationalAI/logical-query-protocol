(transaction
  (configure { :ivm.maintenance_level "off" :semantics_version 0})
  (epoch
    (writes
      (define
        (fragment
          :person_model
          (def 0x392e7dd75e9799732c538ee163db0760 ([id::INT] (or (= id 1) (= id 2))))
          (def
            0x6034468be03f6405f0becfef7effa5ef
            ([id::INT n::STRING]
             (or (and (= id 1) (= n "SSN#Alice")) (and (= id 2) (= n "SSN#Bob"))))
            (attrs (attribute :function "checked")))
          (functional_dependency
            0xd3370b9543567ed6de880771f976838e
            ([n::STRING id::INT] (atom 0x6034468be03f6405f0becfef7effa5ef id n))
            (keys n)
            (values id))
          (def
            0x7ebbc9217722e13159d6c198bf6f4105
            ([id::INT fn::STRING]
             (or (and (= id 1) (= fn "Alice")) (and (= id 2) (= fn "Bob"))))
            (attrs (attribute :function "checked")))
          (def
            0x1811e802a2bd10b91cd5110063b82623
            ([id::INT ln::STRING]
             (or (and (= id 1) (= ln "Smith")) (and (= id 2) (= ln "Johnson"))))
            (attrs (attribute :function "checked")))
          (functional_dependency
            0x6285e2a423dab44666c60928e9563f0c
            ([fn::STRING ln::STRING id::INT]
             (and
               (atom 0x7ebbc9217722e13159d6c198bf6f4105 id fn)
               (atom 0x1811e802a2bd10b91cd5110063b82623 id ln)))
            (keys fn ln)
            (values id))))
      (define
        (fragment
          :emp_model
          (def 0x6b75f09113d91520892703576a4e0114 ([id::INT] (= id 1)))
          (def
            0xb41745ef70cb0d59377aa9e6b96e6f42
            ([id::INT eid::INT] (and (= id 1) (= eid 1001)))
            (attrs (attribute :function "checked")))
          (functional_dependency
            0xab0ba43b92ccf2c37b5709110fcb5e5
            ([n::STRING id::INT] (atom 0x6034468be03f6405f0becfef7effa5ef id n))
            (keys n)
            (values id))
          (functional_dependency
            0xa4c4b029c78f98f61ca5f84034153476
            ([eid::INT id::INT] (atom 0xb41745ef70cb0d59377aa9e6b96e6f42 id eid))
            (keys eid)
            (values id))))
      (define
        (fragment
          :query1
          (def
            0xf79686c8a63ea52a66313e4794d4872e
            ([n::STRING fn::STRING ln::STRING eid::INT]
             (exists
               [person_id::INT]
               (and
                 (atom 0x6034468be03f6405f0becfef7effa5ef person_id n)
                 (atom 0x7ebbc9217722e13159d6c198bf6f4105 person_id fn)
                 (atom 0x1811e802a2bd10b91cd5110063b82623 person_id ln)
                 (atom 0xb41745ef70cb0d59377aa9e6b96e6f42 person_id eid)
                 (atom 0x6b75f09113d91520892703576a4e0114 person_id))))))))
    (reads (output :output1 0xf79686c8a63ea52a66313e4794d4872e)))
  (epoch
    (writes
      (define
        (fragment
          :car_model
          (def 0x74b4eb53154fb6dc9258c1bb7df0cda5 ([id::INT] (or (= id 3) (= id 4))))
          (def
            0xfcdd74ee63dd589daf9d9db6e239258a
            ([id::INT v::STRING]
             (or (and (= id 3) (= v "VIN#Honda")) (and (= id 4) (= v "VIN#Toyota"))))
            (attrs (attribute :function "checked")))
          (functional_dependency
            0x9a2838089ffb566c6c9225da546f9bbc
            ([v::STRING id::INT] (atom 0xfcdd74ee63dd589daf9d9db6e239258a id v))
            (keys v)
            (values id))
          (def
            0x3f3945c4be03ebfe0ec4b35fa1a25ad0
            ([id::INT m::STRING]
             (or (and (= id 3) (= m "Honda")) (and (= id 4) (= m "Toyota"))))
            (attrs (attribute :function "checked")))
          (def
            0xd6fe1a9f2873983c68eaa471505b0222
            ([person_id::INT car_id::INT date::STRING amount::INT]
             (or
               (and (= person_id 1) (= car_id 3) (= date "2020-01-15") (= amount 20000))
               (and (= person_id 2) (= car_id 4) (= date "2021-06-30") (= amount 25000))))
            (attrs (attribute :function "checked" 2)))))))
  (epoch
    (writes
      (define
        (fragment
          :car_purchase_fd
          (functional_dependency
            0xc10170e01e3097f1efd7ce14321ea5e7
            ([person_id::INT car_id::INT date::STRING amount::INT]
             (atom 0xd6fe1a9f2873983c68eaa471505b0222 person_id car_id date amount))
            (keys car_id date)
            (values person_id))))
      (define
        (fragment
          :ownership_model
          (def
            0x719ea6ac3924fc13c08f3aee8582faaa
            ([person_id::INT car_id::INT]
             (exists
               [date::STRING amount::INT]
               (and
                 (atom 0xd6fe1a9f2873983c68eaa471505b0222 person_id car_id date amount)
                 (>= amount 20000)))))
          (functional_dependency
            0x89c045a3710e71fb58521b01a72b66b8
            ([person_id::INT car_id::INT]
             (and
               (atom 0x719ea6ac3924fc13c08f3aee8582faaa person_id car_id)
               (atom 0x392e7dd75e9799732c538ee163db0760 person_id)))
            (keys person_id)
            (values car_id))))))
  (epoch
    (writes
      (define
        (fragment
          :ownership_model
          (def
            0x719ea6ac3924fc13c08f3aee8582faaa
            ([person_id::INT car_id::INT]
             (exists
               [date::STRING amount::INT]
               (atom 0xd6fe1a9f2873983c68eaa471505b0222 person_id car_id date amount))))
          (functional_dependency
            0x2b889547a2853b31987288a0abfe22db
            ([person_id::INT car_id::INT]
             (atom 0x719ea6ac3924fc13c08f3aee8582faaa person_id car_id))
            (keys car_id)
            (values person_id))))
      (undefine :emp_model)))
  (epoch
    (writes
      (define
        (fragment
          :query2
          (functional_dependency
            0x4a964ae5410c34133e7f95b3a040f4e1
            ([n::STRING car_id::INT person_id::INT v::STRING]
             (and
               (atom 0x6034468be03f6405f0becfef7effa5ef person_id n)
               (atom 0xfcdd74ee63dd589daf9d9db6e239258a car_id v)
               (atom 0x719ea6ac3924fc13c08f3aee8582faaa person_id car_id)))
            (keys v)
            (values n))
          (def
            0x35ee77f3d4d936a7afc6cf596784137
            ([n::STRING fn::STRING ln::STRING v::STRING]
             (exists
               [person_id::INT car_id::INT]
               (and
                 (atom 0x6034468be03f6405f0becfef7effa5ef person_id n)
                 (atom 0x7ebbc9217722e13159d6c198bf6f4105 person_id fn)
                 (atom 0x1811e802a2bd10b91cd5110063b82623 person_id ln)
                 (atom 0x719ea6ac3924fc13c08f3aee8582faaa person_id car_id)
                 (atom 0xfcdd74ee63dd589daf9d9db6e239258a car_id v))))))))
    (reads (output :output2 0x35ee77f3d4d936a7afc6cf596784137))))

;; Debug information
;; -----------------------
;; Original names
;; 	 ID `0x74b4eb53154fb6dc9258c1bb7df0cda5` -> `Car`
;; 	 ID `0x6b75f09113d91520892703576a4e0114` -> `Employee`
;; 	 ID `0x392e7dd75e9799732c538ee163db0760` -> `Person`
;; 	 ID `0x89c045a3710e71fb58521b01a72b66b8` -> `car_determines_owner`
;; 	 ID `0x2b889547a2853b31987288a0abfe22db` -> `car_has_at_most_one_owner`
;; 	 ID `0xc10170e01e3097f1efd7ce14321ea5e7` -> `date_and_car_determine_person`
;; 	 ID `0xb41745ef70cb0d59377aa9e6b96e6f42` -> `emp_id`
;; 	 ID `0xa4c4b029c78f98f61ca5f84034153476` -> `emp_id_is_employee_key`
;; 	 ID `0x7ebbc9217722e13159d6c198bf6f4105` -> `first_name`
;; 	 ID `0x1811e802a2bd10b91cd5110063b82623` -> `last_name`
;; 	 ID `0x3f3945c4be03ebfe0ec4b35fa1a25ad0` -> `make`
;; 	 ID `0x6285e2a423dab44666c60928e9563f0c` -> `name_is_person_key`
;; 	 ID `0x719ea6ac3924fc13c08f3aee8582faaa` -> `owns`
;; 	 ID `0xd6fe1a9f2873983c68eaa471505b0222` -> `purchased_on_for`
;; 	 ID `0xf79686c8a63ea52a66313e4794d4872e` -> `query1`
;; 	 ID `0x35ee77f3d4d936a7afc6cf596784137` -> `query2`
;; 	 ID `0x6034468be03f6405f0becfef7effa5ef` -> `ssn`
;; 	 ID `0xab0ba43b92ccf2c37b5709110fcb5e5` -> `ssn_is_employee_key`
;; 	 ID `0xd3370b9543567ed6de880771f976838e` -> `ssn_is_person_key`
;; 	 ID `0xfcdd74ee63dd589daf9d9db6e239258a` -> `vin`
;; 	 ID `0x4a964ae5410c34133e7f95b3a040f4e1` -> `vin_determines_owner`
;; 	 ID `0x9a2838089ffb566c6c9225da546f9bbc` -> `vin_is_car_key`
