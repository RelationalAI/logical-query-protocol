(transaction
  (epoch
    (writes
      (define
        (fragment :f1
          (algorithm :R1 :R2
            (script
              (loop
                (init
                  (assign :R1
                    ([a::INT b::INT]
                      (or
                        (and
                          (primitive :rel_primitive_eq a 1::INT)
                          (primitive :rel_primitive_eq b 2::INT))
                        (and
                          (primitive :rel_primitive_eq a 2::INT)
                          (primitive :rel_primitive_eq b 3::INT)))))
                  (assign :R2
                    ([a::INT b::INT]
                      (or
                        (and
                          (primitive :rel_primitive_eq a 1::INT)
                          (primitive :rel_primitive_eq b 2::INT))
                        (and
                          (primitive :rel_primitive_eq a 2::INT)
                          (primitive :rel_primitive_eq b 3::INT))))
                    (attrs
                      (attribute :function )))
                  (assign :U
                    ([a::INT b::INT]
                      (and
                        (primitive :rel_primitive_eq a 1::INT)
                        (primitive :rel_primitive_eq b 3::INT))))
                  (assign :always
                    ([]
                      (or
))))
                  (script
                    (upsert :R1
                      ([a::INT b::INT]
                        (atom :U a b)))
                    (upsert :R2
                      ([a::INT b::INT]
                        (atom :U a b)))
                    (break :always
                      ([]
                        (and
))))))))))
    (reads
      (output :R1 :R1)
      (output :R2 :R2))))
