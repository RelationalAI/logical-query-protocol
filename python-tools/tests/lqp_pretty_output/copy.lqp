(transaction
  (configure
    { :ivm.maintenance_level "off"
      :semantics_version 0})
  (epoch
    (writes
      (define
        (fragment :f1
          (def :edges
            ([a::INT b::INT]
              (or
                (and
                  (primitive :rel_primitive_eq a 1)
                  (primitive :rel_primitive_eq b 2))
                (and
                  (primitive :rel_primitive_eq a 2)
                  (primitive :rel_primitive_eq b 3))
                (and
                  (primitive :rel_primitive_eq a 3)
                  (primitive :rel_primitive_eq b 4))
                (and
                  (primitive :rel_primitive_eq a 2)
                  (primitive :rel_primitive_eq b 5))
                (and
                  (primitive :rel_primitive_eq a 5)
                  (primitive :rel_primitive_eq b 3))
                (and
                  (primitive :rel_primitive_eq a 6)
                  (primitive :rel_primitive_eq b 5)))))
          (algorithm :frontier :reachable
            (script
              (loop
                (init
                  (assign :frontier
                    ([n::INT]
                      (primitive :rel_primitive_eq n 1)))
                  (assign :reachable
                    ([_n::INT]
                      (or
))))
                  (script
                    (upsert :reachable
                      ([n::INT]
                        (atom :frontier n)))
                    (assign :next
                      ([m::INT]
                        (exists [n::INT]
                          (and
                            (and
                              (atom :frontier n)
                              (atom :edges n m))
                            (not
                              (atom :reachable m))))))
                    (copy :frontier
                      ([n::INT]
                        (atom :next n)))
                    (break :empty_frontier
                      ([]
                        (ffi :rel_primitive_all_empty
                          (args
                            ([n::INT]
                              (atom :frontier n)))
                          (terms)))))))))))
    (reads
      (output :reachable :reachable))))
