(transaction
  (epoch
    (local_writes
      (define
        (fragment :f1
          (def :edges ([a::INT b::INT]
            (or
              (and (= a 1) (= b 2))
              (and (= a 2) (= b 3))
              (and (= a 3) (= b 4))
              (and (= a 2) (= b 5))
              (and (= a 5) (= b 3))
              (and (= a 6) (= b 5)))))
          (algorithm :reachable
            (script
              (loop
                (init
                  (assign :reachable ([n::INT] (= n 1))))
                (script
                  (assign :next ([m::INT]
                    (or
                      (atom :reachable m)
                      (exists [n::INT]
                        (and
                          (atom :reachable n)
                          (atom :edges n m))))))
                  (break :nothing_new ([]
                    (ffi :rel_primitive_pairwise_equal
                      (args
                        ([n::INT] (atom :reachable n))
                        ([n::INT] (atom :next n)))
                      (terms ))))
                  (assign :reachable ([n::INT]
                    (atom :next n))))))))))
    (reads
      (output :reachable :reachable))))
