(transaction
  (configure
    { :ivm.maintenance_level "off"
      :semantics_version 0})
  (epoch
    (writes
      (define
        (fragment :f1
          (def 0x2c26b46b68ffc68f
            ([category::STRING amount::FLOAT]
              (or
                (and
                  (primitive :rel_primitive_eq category "food")
                  (primitive :rel_primitive_eq amount 1.23))
                (and
                  (primitive :rel_primitive_eq category "food")
                  (primitive :rel_primitive_eq amount 10.23))
                (and
                  (primitive :rel_primitive_eq category "food")
                  (primitive :rel_primitive_eq amount 13.0))
                (and
                  (primitive :rel_primitive_eq category "drink")
                  (primitive :rel_primitive_eq amount 6.34))
                (and
                  (primitive :rel_primitive_eq category "drink")
                  (primitive :rel_primitive_eq amount 2.82)))))
          (def 0x9f5ffef28309853
            ([cat::STRING x::FLOAT]
              (reduce
                ([a::FLOAT b::FLOAT c::FLOAT]
                  (primitive :rel_primitive_add_monotype a b c))
                ([num::FLOAT]
                  (atom 0x2c26b46b68ffc68f cat num))
                (terms x))))
          (def 0x6c35493a2b937829
            ([cat::STRING x::INT]
              (reduce
                ([a::FLOAT b::FLOAT c::FLOAT]
                  (primitive :rel_primitive_add_monotype a b c))
                ([num::FLOAT one::INT]
                  (and
                    (atom 0x2c26b46b68ffc68f cat num)
                    (primitive :rel_primitive_eq one 1)))
                (terms x)))))))
    (reads
      (output :items_sum 0x9f5ffef28309853)
      (output :items_count 0x6c35493a2b937829))))
