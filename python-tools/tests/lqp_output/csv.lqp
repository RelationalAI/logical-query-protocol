(transaction
  (configure
    { :ivm.maintenance_level "off"
      :semantics_version 0})
  (epoch
    (writes
      (define
        (fragment :f1
          (csv_relation
            (csv_locator
              (paths "s3://bucket/data/file1.csv" "s3://bucket/data/file2.csv"))
            (csv_config
              { :csv_compression "auto"
                :csv_decimal_separator "."
                :csv_delimiter ","
                :csv_encoding "utf-8"
                :csv_escapechar "\""
                :csv_header_row 1
                :csv_quotechar "\""
                :csv_skip 0})
            (columns
              (column "user_id" 17914592993080586817 [INT])
              (column "name" 3318323897171887315 [STRING])
              (column "score" 15024169012464168155 [FLOAT]))
            (asof "2025-01-01T00:00:00Z"))
          (csv_relation
            (csv_locator
              (paths "https://example.com/data.csv"))
            (csv_config
              { :csv_comment "#"
                :csv_compression "gzip"
                :csv_decimal_separator ","
                :csv_delimiter "|"
                :csv_encoding "latin-1"
                :csv_escapechar "\\"
                :csv_header_row 2
                :csv_missing_strings "NA"
                :csv_quotechar "'"
                :csv_skip 1})
            (columns
              (column "timestamp" 4948721473946711771 [DATETIME])
              (column "value" 10943683732806582112 [(DECIMAL 18 4)]))
            (asof "2025-01-15T12:00:00Z"))
          (csv_relation
            (csv_locator
              (inline_data "user_id,name,score\n1,Alice,95.5\n2,Bob,87.3"))
            (csv_config
              { :csv_compression "auto"
                :csv_decimal_separator "."
                :csv_delimiter ","
                :csv_encoding "utf-8"
                :csv_escapechar "\""
                :csv_header_row 1
                :csv_quotechar "\""
                :csv_skip 0})
            (columns
              (column "user_id" 1730211800068853807 [INT])
              (column "name" 2796314487109628035 [STRING])
              (column "score" 2286927111849837318 [FLOAT]))
            (asof "2025-01-01T00:00:00Z"))
          (csv_relation
            (csv_locator
              (paths "/local/path/data.csv"))
            (csv_config
              { :csv_compression "auto"
                :csv_decimal_separator "."
                :csv_delimiter "\t"
                :csv_encoding "utf-8"
                :csv_escapechar "\""
                :csv_header_row 1
                :csv_quotechar "\""
                :csv_skip 0})
            (columns
              (column "id" 13663055770000247273 [INT STRING])
              (column "data" 310947696548484702 [STRING FLOAT BOOLEAN]))
            (asof "2025-02-01T00:00:00Z"))
          (csv_relation
            (csv_locator
              (paths "data/infer.csv"))
            (csv_config
              { :csv_compression "auto"
                :csv_decimal_separator "."
                :csv_delimiter ","
                :csv_encoding "utf-8"
                :csv_escapechar "\""
                :csv_header_row 1
                :csv_quotechar "\""
                :csv_skip 0})
            (columns
              (column "col1" 15550009007474765693 [])
              (column "col2" 6484483159165596370 []))
            (asof "2025-03-01T00:00:00Z")))))
    (reads
      (output :user_id 17914592993080586817)
      (output :user_name 3318323897171887315)
      (output :user_score 15024169012464168155)
      (output :ts 4948721473946711771)
      (output :val 10943683732806582112)
      (output :inline_user_id 1730211800068853807)
      (output :inline_user_name 2796314487109628035)
      (output :inline_user_score 2286927111849837318)
      (output :multi_id 13663055770000247273)
      (output :multi_data 310947696548484702)
      (output :inferred1 15550009007474765693)
      (output :inferred2 6484483159165596370))))
