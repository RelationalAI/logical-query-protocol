;; Simple fragment defining a relation 'person' and using variables correctly
(fragment :frag
  (def :person
    ([name::STRING age::INT] ;; Declare vars in abstraction
     (exists [city::STRING] ;; Declare var in exists
       (and
         (atom :source name age city) ;; Use declared vars
         (= age 10) ;; Use declared var and constant
         (primitive :some_check city)))))) ;; Use declared var
