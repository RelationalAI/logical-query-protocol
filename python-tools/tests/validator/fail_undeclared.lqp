;; ERROR: Undeclared variable used at fail_undeclared.lqp:11:23: 'some_limit'
(transaction
  (epoch
    (local_writes
      (define
        (fragment :frag
          (def :person
            ([name::STRING age::INT] ;; Declare name, age
             (and
               (atom :source name age) ;; OK: name, age are declared
               (= age some_limit))))))) ;; FAIL: some_limit is not declared
    (reads)))
