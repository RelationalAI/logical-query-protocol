(transaction
  (epoch
    (writes
      (define
        (fragment :f1
          (def 3181428560199927439
            ([category::STRING amount::FLOAT]
              (or
                (and
                  (primitive :rel_primitive_eq category "food"::STRING)
                  (primitive :rel_primitive_eq amount 1.23::FLOAT))
                (and
                  (primitive :rel_primitive_eq category "food"::STRING)
                  (primitive :rel_primitive_eq amount 10.23::FLOAT))
                (and
                  (primitive :rel_primitive_eq category "food"::STRING)
                  (primitive :rel_primitive_eq amount 13.00::FLOAT))
                (and
                  (primitive :rel_primitive_eq category "drink"::STRING)
                  (primitive :rel_primitive_eq amount 6.34::FLOAT))
                (and
                  (primitive :rel_primitive_eq category "drink"::STRING)
                  (primitive :rel_primitive_eq amount 2.82::FLOAT)))))
          (def 717761118272002131
            ([cat::STRING x::FLOAT]
              (reduce
                ([a::FLOAT b::FLOAT c::FLOAT]
                  (primitive :rel_primitive_add_monotype a b c))
                ([num::FLOAT]
                  (atom 3181428560199927439 cat num))
                (terms x))))
          (def 7797218844049897513
            ([cat::STRING x::INT]
              (reduce
                ([a::FLOAT b::FLOAT c::FLOAT]
                  (primitive :rel_primitive_add_monotype a b c))
                ([num::FLOAT one::INT]
                  (and
                    (atom 3181428560199927439 cat num)
                    (primitive :rel_primitive_eq one 1::INT)))
                (terms x)))))))
    (reads
      (output :items_sum 717761118272002131)
      (output :items_count 7797218844049897513))))

;; Debug information
;; -----------------------
;; Original names
;; 	 ID `3181428560199927439` -> `foo`
;; 	 ID `717761118272002131` -> `sum`
;; 	 ID `7797218844049897513` -> `count`
