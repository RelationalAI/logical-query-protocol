(transaction
  (configure
    { :ivm.maintenance_level "off"
      :semantics_version 0})
  (epoch
    (writes
      (define
        (fragment
          :f1
          (algorithm
            :R1
            :R2
            :R3
            :R4
            (script
              (loop
                (init
                  (assign
                    :R1
                    ([x::INT
                    y::INT] (or
                      (and
                        (=
                          x
                          1)
                        (=
                          y
                          10))
                      (and
                        (=
                          x
                          2)
                        (=
                          y
                          3)))))
                  (assign
                    :R2
                    ([x::INT
                    y::INT] (or
                      (and
                        (=
                          x
                          1)
                        (=
                          y
                          10))
                      (and
                        (=
                          x
                          2)
                        (=
                          y
                          3)))))
                  (assign
                    :R3
                    ([x::INT
                    y::INT] (or
                      (and
                        (=
                          x
                          1)
                        (=
                          y
                          5))
                      (and
                        (=
                          x
                          2)
                        (=
                          y
                          20)))))
                  (assign
                    :R4
                    ([x::INT
                    y::INT] (or
                      (and
                        (=
                          x
                          1)
                        (=
                          y
                          7))
                      (and
                        (=
                          x
                          2)
                        (=
                          y
                          25)))))
                  (assign
                    :U
                    ([x::INT
                    y::INT] (or
                      (and
                        (=
                          x
                          1)
                        (=
                          y
                          5))
                      (and
                        (=
                          x
                          2)
                        (=
                          y
                          20))))
                    (attrs
                      (attribute
                        :function)))
                  (assign
                    :always
                    ([] (false))))
                (script
                  (monoid
                    (min
                      INT)
                    :R1
                    ([x::INT | y::INT] (atom
                      :U
                      x
                      y))
                    (attrs
                      (attribute
                        :function)))
                  (monoid
                    (or)
                    :R2
                    ([x::INT
                    y::INT] (atom
                      :U
                      x
                      y)))
                  (monus
                    (or)
                    :R3
                    ([x::INT | y::INT] (atom
                      :U
                      x
                      y))
                    (attrs
                      (attribute
                        :function)))
                  (monus
                    (sum
                      INT)
                    :R4
                    ([x::INT | y::INT] (atom
                      :U
                      x
                      y))
                    (attrs
                      (attribute
                        :function)))
                  (break
                    :always
                    ([] (true))))))))))
    (reads
      (output
        :R1
        :R1)
      (output
        :R2
        :R2)
      (output
        :R3
        :R3)
      (output
        :R4
        :R4))))
