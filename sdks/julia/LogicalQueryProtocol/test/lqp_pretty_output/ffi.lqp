(transaction
  (configure
    { :ivm.maintenance_level "off"
      :semantics_version 0})
  (epoch
    (writes
      (define
        (fragment
          :primitives
          (def
            :numbers
            ([v::INT] (or
              (=
                v
                5)
              (=
                v
                12)
              (=
                v
                3))))
          (def
            :sorted_numbers
            ([ord::INT
            v::INT] (ffi
              :rel_primitive_sort
              (args
                ([x::INT] (atom
                  :numbers
                  x)))
              (terms
                ord
                v))))
          (def
            :limit_sorted_numbers
            ([ord::INT
            v::INT] (ffi
              :rel_primitive_top
              (args
                ([x::INT] (atom
                  :numbers
                  x))
                ([limit::INT] (=
                  limit
                  2)))
              (terms
                ord
                v)))))))
    (reads
      (output
        :numbers
        :numbers)
      (output
        :limit_sorted_numbers
        :limit_sorted_numbers)
      (output
        :sorted_numbers
        :sorted_numbers))))
