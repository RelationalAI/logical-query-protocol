(transaction
  (configure { :ivm.maintenance_level "off" :semantics_version 0})
  (epoch
    (writes (define (fragment :f1 (def :data ([] (= 1 1))) (def 0x1 ([] (atom :data))))))
    (reads (demand :data) (abort 0x1)))
  (epoch
    (writes (define (fragment :f2 (def :branch_data ([] (= 2 2))))))
    (reads
      (what_if
        :my_branch
        (epoch
          (writes (define (fragment :f3 (def :inner ([] (= 3 3))))))
          (reads (output :inner_out :inner)))))))
