(transaction
  (configure { :ivm.maintenance_level "off" :semantics_version 0})
  (epoch
    (writes
      (define
        (fragment
          :f1
          (def
            0x00000000000000002c26b46b68ffc68f
            ([category::STRING amount::FLOAT]
             (or
               (and (= category "food") (= amount 1.23))
               (and (= category "food") (= amount 10.23))
               (and (= category "food") (= amount 13.0))
               (and (= category "drink") (= amount 6.34))
               (and (= category "drink") (= amount 2.82)))))
          (def
            0x000000000000000009f5ffef28309853
            ([cat::STRING x::FLOAT]
             (reduce
               ([a::FLOAT b::FLOAT c::FLOAT] (+ a b c))
               ([num::FLOAT] (atom 0x00000000000000002c26b46b68ffc68f cat num))
               (terms x))))
          (def
            0x00000000000000006c35493a2b937829
            ([cat::STRING x::INT]
             (reduce
               ([a::FLOAT b::FLOAT c::FLOAT] (+ a b c))
               ([num::FLOAT one::INT]
                (and (atom 0x00000000000000002c26b46b68ffc68f cat num) (= one 1)))
               (terms x)))))))
    (reads
      (output :items_sum 0x000000000000000009f5ffef28309853)
      (output :items_count 0x00000000000000006c35493a2b937829))))

;; Debug information
;; -----------------------
;; Original names
;; 	 ID `0x6c35493a2b937829` -> `count`
;; 	 ID `0x2c26b46b68ffc68f` -> `foo`
;; 	 ID `0x9f5ffef28309853` -> `sum`
